
<ion-content [fullscreen]="true" class="ion-padding" color="light" class="background">
    <ion-row><ion-col>
      <ion-img src="../../assets/Inka-04 1.png"></ion-img>
    </ion-col></ion-row>
    <!-- Ingresar mail -->
    <ng-container *ngIf="paso === 1">
      <div color="primary-contrast">
        <ion-row><ion-col>
          <ion-label>
            <h5>Welcome to Inka Expediciones!</h5>
            <p>
              To access the app, please enter your email address. 
              A validation code will be sent to this email, which you will need to enter in the next step.
            </p>
          </ion-label>
        </ion-col></ion-row>
        <ion-row><ion-col>
          <ion-input [(ngModel)]="useremail" fill="filled" type="email" errorText="Not a valid mail" #emailinput label="Your e-mail" labelPlacement="stacked"></ion-input>
          <ion-note *ngIf="invalidMail == true" slot="error" color="danger" class="ion-hide">
            Not a valid mail
          </ion-note>
          <ion-button size="default" expand="block" (click)="enviarEmail()"
            [disabled]="useremail == ''">SEND</ion-button>
        </ion-col></ion-row>
        <ion-row><ion-col class="idioma">
          <ion-row><ion-col>
            <ion-img (click)="cambiarIdioma('es')" src="../../assets/es.png"></ion-img>
          </ion-col><ion-col>
            <ion-img (click)="cambiarIdioma('en')" src="../../assets/en.png"></ion-img>
          </ion-col></ion-row>
        </ion-col></ion-row>  
      </div>
    </ng-container>

    <!-- Esperar por token-->
    <ng-container *ngIf="paso === 2">
      <div color="primary-contrast">
        <ion-row><ion-col>
          <h5>Enter validation code</h5>
        </ion-col></ion-row>
        <ion-row><ion-col>
          <ion-input maxlength="6" [(ngModel)]="token" label="6 numbers validation code" labelPlacement="stacked"></ion-input>
        </ion-col></ion-row>
        <ion-row><ion-col>
        <ion-button size="default" expand="block" [disabled]="token == '' || token.length < 6" (click)="vincularUsuario()">SEND</ion-button>
        </ion-col></ion-row>
      </div>
    </ng-container>

    <!-- Multiples usuarios-->
    <ng-container *ngIf="paso === 3">
      <div color="primary-contrast">
        <ion-row><ion-col>
          <ion-label>
            <h5>Who are you?</h5>
            <p>
              Multiple users are associated with this email address in our database. 
              Please select the profile that corresponds to you from the list below.
            </p>
          </ion-label>
        </ion-col></ion-row>
        <ion-row><ion-col>
          <ion-list>
            <ion-radio-group (ionChange)="usuarioSeleccionado($event)">
              <ion-item *ngFor="let usuario of usuarios">
                <ion-radio [value]="usuario.id_cliente" labelPlacement="start"
                  justify="space-between">{{usuario.nombre}} {{usuario.apellido}}</ion-radio>
              </ion-item>
            </ion-radio-group>
          </ion-list>
        </ion-col></ion-row>
        <ion-row><ion-col>
          <ion-button size="default" expand="block" [disabled]="usuarioVinculado.id_cliente == 0" (click)="terminarProceso()">ENTER APP</ion-button>
        </ion-col></ion-row>  
      </div>
    </ng-container>
</ion-content>